<html>
	<head>
		<title>City Scroller</title>
		<script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
		<script type="text/processing" data-processing-target="mycanvas">
        //Your code goes here

        // Declare and contruct two objects (h1, h2) from the class HorizontalLine

				Skyline backSkyline = new Skyline(200, 360, 2);

				Skyline frontSkyline = new Skyline(100, 200, 3);


        //since these are variables we don't want to ever change in the code, we capitalize them


				var WINDOW_WIDTH = screen.width;
        var WINDOW_HEIGHT = 400;
        var LIGHTBLUE = color(150,200,250);
        //This function only runs once at the start of the program
        void setup() {
          size(WINDOW_WIDTH, WINDOW_HEIGHT); //sets the size of the window

          frameRate(30); //how many times the draw function is called per second

        }



        //called repeatedly
        void draw() {

          background(LIGHTBLUE); //needed in the draw function to "clear" the screen between updates

					backSkyline.moveSkyline();

					frontSkyline.moveSkyline();



        }


        //This is the definition of your object
        //a class consists of:
        //attributes which describes the object
        //a constructor which sets the default values for the attributes
        //and functions which manipulate/give information about the attributes




        class Building
        {

          //attributes
          var buildingColor, buildingWidth, buildingHeight, buildingX, buildingY;

          //constructor
          Building(var x, var bw, var bh)

          {

            buildingColor = color(random(150,200));

            buildingWidth = bw;

            buildingHeight = bh;

            buildingX = x;

            buildingY = 400 - buildingHeight;



          }

          void moveBuilding()
          {

            update();
            drawBuilding();
          }


          void update(var speed)
          {

            buildingX -= speed;



          }

          void drawBuilding()
          {


						fill(buildingColor);
						rect(buildingX,buildingY,buildingWidth,buildingHeight);
						fill(10);
						rect(buildingX+10,buildingY+10,buildingWidth/5,buildingHeight/20);
						rect(buildingX+ buildingWidth - buildingWidth/5 - 10,buildingY+10,buildingWidth/5,buildingHeight/20);


          }


        }

        class Skyline
        {



					//attributes
					ArrayList<Building> buildingList;

					var buildingX;
					var minBuildingHeight;
					var maxBuildingHeight;
					var buildingSpeed;

					//constructor
						Skyline(var minBH, var maxBH, var BuS)
						{

							buildingSpeed = BuS;

							minBuildingHeight = minBH;

							maxBuildingHeight = maxBH;

							buildingX = 0;

							buildingList = new ArrayList<Buildings>();

							fillSkyline();


						}

						void addBuilding() {

							var buildingHeight = random(minBuildingHeight,maxBuildingHeight);
							var buildingWidth = random(50,80);
							Building newBuilding = new Building(buildingX, buildingWidth, buildingHeight);
							buildingList.add(newBuilding);
							buildingX += buildingWidth;

					}


					void drawSkyline()
					{


						for (int i = buildingList.size()-1; i >= 0; i--)
						{
							Building randomBuilding = (Building) buildingList.get(i);

              randomBuilding.drawBuilding();



						}


					}


					void moveSkyline()
					{
						update();
						drawSkyline();

					}


					void update()
					{
						for (int i = buildingList.size()-1; i >= 0; i--)
						{
							Building randomBuilding = (Building) buildingList.get(i);

              randomBuilding.update(buildingSpeed);

						}

						buildingX -= buildingSpeed;

						if (buildingX < width +200)
								{
									addBuilding();

								}

						//if (buildingX < 0-buildingWidth)
								//{
									//buildingList.remove(i);

								//}


					}


					void fillSkyline()
					{


						while (buildingX<screen.width)
						{
							addBuilding();
						}

					}


        }


        </script>
    </head>

    <body>
		<canvas id="mycanvas"></canvas>
	</body>
</html>
